
## ğŸ“š 4ì°¨ì‹œ í•™ìŠµ ëª©í‘œ

1. **Node.js ê°œë…ê³¼ JavaScript í•„ìˆ˜ ê°œë… ì´í•´**
2. **APIì˜ ì¤‘ìš”ì„±ê³¼ RESTful API ê¸°ë³¸ êµ¬ì¡° íŒŒì•…**
3. **CRUD ê°œë… ì´í•´ ë° ì‹¤ìŠµì„ í†µí•œ Backend êµ¬í˜„**
4. **AI ì‹œëŒ€ JavaScriptì˜ ì¤‘ìš”ì„±ê³¼ JSON ë°ì´í„° êµ¬ì¡° ì´í•´**

---

## ğŸš€ 4-1. Node.js ì´í•´ ë° í™˜ê²½ ì„¤ì •

### Node.js ê°œë…

**ì •ì˜**: Chrome V8 ê¸°ë°˜ JavaScript ëŸ°íƒ€ì„(ë¸Œë¼ìš°ì € ë°–ì—ì„œ JS ì‹¤í–‰). ì–¸ì–´ê°€ ì•„ë‹˜.

**íŠ¹ì§•**

- **ì´ë²¤íŠ¸ ê¸°ë°˜**: ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬ë¡œ íš¨ìœ¨ì ì¸ ì„œë²„ ìš´ì˜
- **ë…¼ë¸”ë¡œí‚¹ I/O**: ë™ì‹œì— ì—¬ëŸ¬ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ ì„±ëŠ¥ ìµœì í™”
- **ì ì€ ìì›ìœ¼ë¡œ ë™ì‹œ ìš”ì²­ ì²˜ë¦¬ì— ê°•í•¨**: ì‹¤ì‹œê°„Â·API ì„œë²„ì— ì í•©

**n8nê³¼ì˜ ê´€ê³„**

- n8nì€ Node.js ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ë˜ì–´ ìˆìŒ
- Code ë…¸ë“œ í™œìš© ì‹œ JavaScript ì´í•´ê°€ í•„ìˆ˜
- ì»¤ìŠ¤í…€ ê¸°ëŠ¥ êµ¬í˜„ ë° ë™ì‘ ì›ë¦¬ ì´í•´ì— ë„ì›€

### AI ì‹œëŒ€ JavaScriptë¥¼ ë°°ì›Œì•¼ í•˜ëŠ” ì´ìœ 

#### 1. **AI ì½”ë“œ ê²€ì¦ ëŠ¥ë ¥**

- AIê°€ ë§Œë“  ì½”ë“œì˜ ì˜¤ë¥˜ ì°¾ê³  í’ˆì§ˆ íŒë‹¨í•˜ë ¤ë©´ JavaScript ê¸°ì´ˆê°€ í•„ìš”
- AIëŠ” ì™„ë²½í•˜ì§€ ì•ŠìŒ. ê²°êµ­ ì‚¬ëŒì´ ê²€í† Â·ìˆ˜ì •í•´ì•¼ í•¨

#### 2. **ì›¹ ê°œë°œì˜ ë…ì ì  ì§€ìœ„**

- ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‘í•˜ëŠ” ìœ ì¼í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´
- ëª¨ë“  ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ê°œë°œì˜ ê¸°ë³¸
- ëŒ€ì²´ ë¶ˆê°€ëŠ¥í•œ í•µì‹¬ ê¸°ìˆ 

#### 3. **AI ì„œë¹„ìŠ¤ í†µí•©ì˜ í•µì‹¬**

- ChatGPT, Claude ë“± AI APIë¥¼ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì—°ë™
- AI ê¸°ë°˜ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ JavaScriptê°€ ì£¼ë ¥ ì–¸ì–´

#### 4. **íš¨ê³¼ì ì¸ AI í˜‘ì—…**

- ëª…í™•í•œ ìš”êµ¬ ì „ë‹¬ê³¼ ìƒì„± ì½”ë“œ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ ìœ„í•´ í”„ë¡œê·¸ë˜ë° ê°œë…Â·ë¬¸ë²• ì´í•´ê°€ í•„ìš”

#### 5. **ë¹ ë¥¸ ì•„ì´ë””ì–´ êµ¬í˜„**

- ì§„ì… ì¥ë²½ ë‚®ê³  ì¦‰ì‹œ ê²°ê³¼ í™•ì¸ ê°€ëŠ¥
- AI ë„ì›€ìœ¼ë¡œ í”„ë¡œí† íƒ€ì… ë¹ ë¥´ê²Œ ë§Œë“¤ê³  ë°˜ë³µ ê°œì„ 

### JSON (JavaScript Object Notation) ì´í•´

#### ì •ì˜ì™€ íŠ¹ì§•

**ì •ì˜**: ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  êµí™˜(ì „ì†¡)í•˜ê¸° ìœ„í•œ **ê²½ëŸ‰ì˜ í…ìŠ¤íŠ¸ ê¸°ë°˜ ë°ì´í„° í˜•ì‹**

**íŠ¹ì§•**:

- ì‚¬ëŒì´ ì½ê³  ì“°ê¸° ì‰¬ì›€
- ê¸°ê³„(ì»´í“¨í„°)ê°€ íŒŒì‹±(í•´ì„)í•˜ê³  ìƒì„±í•˜ê¸° ì‰¬ì›€
- íŠ¹ì • ì–¸ì–´ì— ì¢…ì†ë˜ì§€ ì•Šì•„, ëŒ€ë¶€ë¶„ì˜ APIê°€ ë°ì´í„° êµí™˜ í‘œì¤€ìœ¼ë¡œ ì‚¬ìš©

#### ê¸°ë³¸ êµ¬ì¡°

- `key: value` (í‚¤-ê°’) ìŒìœ¼ë¡œ êµ¬ì„±ëœ ë°ì´í„°ì˜ ëª¨ìŒ
- `{}` (ì¤‘ê´„í˜¸)ë¡œ ê°ì²´ë¥¼, `[]` (ëŒ€ê´„í˜¸)ë¡œ ë°°ì—´ì„ í‘œí˜„
- **ì˜ˆì‹œ**: `{"name": "ê¹€í•´ì»¤", "age": 30, "isStudent": false}`

#### ì¤‘ì²© êµ¬ì¡° (Nested Data)

```javascript
// ì‹¤ì œ ë°ì´í„° ì˜ˆì‹œ - ì‚¬ìš©ì ì •ë³´ë¥¼ í‘œí˜„í•˜ëŠ” ì¤‘ì²© JSON êµ¬ì¡°
{
  "user": {
    "id": "hacker123",
    "name": "ê¹€í•´ì»¤",
    "contact": { // ê°ì²´ ì† ê°ì²´
      "email": "hacker.kim@example.com",
      "phone": "010-1234-5678"
    },
    "skills": ["n8n", "AI", "JavaScript"], // ë¬¸ìì—´ ë°°ì—´
    "projects": [ // ë°°ì—´ ì† ê°ì²´
      {
        "projectName": "AI ê¸°ë°˜ ì—…ë¬´ ìë™í™”",
        "status": "ì§„í–‰ì¤‘"
      },
      {
        "projectName": "ì‚¬ë‚´ ë‰´ìŠ¤ë ˆí„° ìë™ ë°œì†¡",
        "status": "ì™„ë£Œ"
      }
    ]
  }
}
```



## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •: VS Code ì¶”ì²œ í”ŒëŸ¬ê·¸ì¸

### 1. Code Runner
**ê¸°ëŠ¥**: íŠ¹ì • ì˜ì—­ì´ë‚˜ íŒŒì¼ì„ ë°”ë¡œ ì‹¤í–‰í•˜ì—¬ ê²°ê³¼ë¥¼ ë³¼ìˆ˜ ìˆìŒ
![hackers_4th_01](https://hackers-n8n-lecture.s3.ap-northeast-2.amazonaws.com/images/hackers_4th_01.png)

### 2. Quokka.js
**ê¸°ëŠ¥**: 'Live Scratchpad' for JavaScript. ì½”ë“œ ì‘ì„±ê³¼ ë™ì‹œì— ì‹¤í–‰ ê²°ê³¼ë¥¼ ì—ë””í„°ì— ì¦‰ì‹œ í‘œì‹œ
**ì¥ì **: ê°„ë‹¨í•œ ì½”ë“œ ì¡°ê°(snippet)ì´ë‚˜ ë¡œì§ì„ ë¸Œë¼ìš°ì €/í„°ë¯¸ë„ ì‹¤í–‰ ì—†ì´ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•˜ê³  ë””ë²„ê¹…í•  ìˆ˜ ìˆìŒ

![hackers_4th_02](https://hackers-n8n-lecture.s3.ap-northeast-2.amazonaws.com/images/hackers_4th_02.png)


---

## ğŸ”§ 4-2. JavaScript í•„ìˆ˜ ê°œë… í™•ì¸

### ë³€ìˆ˜ ì„ ì–¸ê³¼ ES6+ ê¸°ë³¸ ë¬¸ë²•

#### ğŸ“¦ ë³€ìˆ˜ ì„ ì–¸: const vs let

```javascript
// const: ì¬í• ë‹¹ ë¶ˆê°€ëŠ¥ (ìƒìˆ˜)
const name = 'ê¹€ì² ìˆ˜';
const age = 25;
// name = 'ë°•ì˜í¬'; // âŒ ì—ëŸ¬!

// let: ì¬í• ë‹¹ ê°€ëŠ¥
let score = 85;
score = 90; // âœ… ê°€ëŠ¥

// ê°ì²´/ë°°ì—´ì€ constì—¬ë„ ë‚´ë¶€ ìˆ˜ì • ê°€ëŠ¥
const user = { name: 'ê¹€ì² ìˆ˜', age: 25 };
user.age = 26; // âœ… ê°€ëŠ¥ (ê°ì²´ ë‚´ë¶€ ìˆ˜ì •)
user.email = 'kim@example.com'; // âœ… ê°€ëŠ¥

const numbers = [1, 2, 3];
numbers.push(4); // âœ… ê°€ëŠ¥ (ë°°ì—´ ë‚´ë¶€ ìˆ˜ì •)
```

#### âœ¨ í™”ì‚´í‘œ í•¨ìˆ˜ (Arrow Function)

```javascript
// ê¸°ì¡´ ë°©ì‹
function add(a, b) {
  return a + b;
}

// í™”ì‚´í‘œ í•¨ìˆ˜ - ê¸°ë³¸í˜•
const add = (a, b) => {
  return a + b;
};

// í™”ì‚´í‘œ í•¨ìˆ˜ - ì¶•ì•½í˜• (í•œ ì¤„ return)
const add = (a, b) => a + b;

// ë§¤ê°œë³€ìˆ˜ê°€ í•˜ë‚˜ì¼ ë•Œ ê´„í˜¸ ìƒëµ ê°€ëŠ¥
const double = x => x * 2;

// ë§¤ê°œë³€ìˆ˜ê°€ ì—†ì„ ë•Œ
const sayHello = () => 'Hello!';
```

#### ğŸ“ Template Literal (ë°±í‹± ë¬¸ìì—´)

```javascript
const name = 'ê¹€ì² ìˆ˜';
const age = 25;

// ê¸°ì¡´ ë°©ì‹
const message = 'ì•ˆë…•í•˜ì„¸ìš”, ' + name + 'ë‹˜! ë‚˜ì´ëŠ” ' + age + 'ì„¸ì´ì‹œêµ°ìš”.';

// Template Literal
const message = `ì•ˆë…•í•˜ì„¸ìš”, ${name}ë‹˜! ë‚˜ì´ëŠ” ${age}ì„¸ì´ì‹œêµ°ìš”.`;

// ê³„ì‚°ë„ ê°€ëŠ¥
const result = `ì˜¬í•´ ë§ì—ëŠ” ${age + 1}ì„¸ê°€ ë©ë‹ˆë‹¤.`;

// ì—¬ëŸ¬ ì¤„ ë¬¸ìì—´
const emailBody = `
  <h1>í™˜ì˜í•©ë‹ˆë‹¤, ${name}ë‹˜!</h1>
  <p>ê°€ì…ì¼: ${new Date().toLocaleDateString()}</p>
`;
```

#### ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì (...) 
- ë°°ì—´ì´ë‚˜ ê°ì²´ë¥¼ "í¼ì³ì„œ" ê°œë³„ ìš”ì†Œë¡œ ë¶„í•´í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µ
- iterable(ë°˜ë³µ ê°€ëŠ¥í•œ) ê°ì²´ë¥¼ ê°œë³„ ìš”ì†Œë¡œ í™•ì¥

```javascript
// 1. ë°°ì—´ì„ ë‹¤ë¥¸ ë°°ì—´ ë©”ì„œë“œì— ì „ë‹¬
const arr1 = [1, 2];
const arr2 = [3, 4, 5];

arr1.push(...arr2);
console.log(arr1); // [1, 2, 3, 4, 5]

// 2. íŠ¹ì • ì†ì„±ë§Œ ì—…ë°ì´íŠ¸ (ê¸°ì¡´ ì†ì„± ìœ ì§€ + ìƒˆ ì†ì„± ì¶”ê°€)
const profile = { 
  id: 1, 
  name: 'ë°•ë¯¼ìˆ˜', 
  email: 'park@example.com' 
};
const updatedProfile = { 
  ...profile,                                  // ê¸°ì¡´ ëª¨ë“  ì†ì„± ë³µì‚¬
  email: 'newpark@example.com',               // emailë§Œ ë®ì–´ì“°ê¸°
  lastLogin: new Date(),                      // ìƒˆ ì†ì„± ì¶”ê°€
  isActive: true                              // ìƒˆ ì†ì„± ì¶”ê°€
};

// 3. í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ë°°ì—´ì„ ê°œë³„ ì¸ìˆ˜ë¡œ ì „ë‹¬
const numbers = [1, 2, 3];
Math.max(...numbers);                         // Math.max(1, 2, 3)ê³¼ ë™ì¼
console.log(...numbers);                      // 1 2 3

```


### êµ¬ì¡°ë¶„í•´ í• ë‹¹ê³¼ ì•ˆì „ ì—°ì‚°ì

#### ğŸ¯ êµ¬ì¡°ë¶„í•´ í• ë‹¹ (Destructuring)

```javascript
const user = { 
  id: 1, 
  name: 'ê¹€ì² ìˆ˜', 
  email: 'kim@example.com', 
  age: 25,
  address: {
    city: 'ì„œìš¸',
    district: 'ê°•ë‚¨êµ¬'
  }
};

// ê¸°ì¡´ ë°©ì‹
const name = user.name;
const email = user.email;

// êµ¬ì¡°ë¶„í•´ í• ë‹¹
const { name, email, age } = user;

// ë³„ëª… ì‚¬ìš©
const { name: userName, email: userEmail } = user;

// ê¸°ë³¸ê°’ ì„¤ì •
const { phone = '010-0000-0000' } = user;

// ì¤‘ì²© ê°ì²´ êµ¬ì¡°ë¶„í•´
const { address: { city, district } } = user;
```

#### ğŸ›¡ï¸ ì•ˆì „ ì—°ì‚°ì (Optional Chaining & Nullish Coalescing)

```javascript
const user = {
  name: 'ê¹€ì² ìˆ˜',
  address: {
    city: 'ì„œìš¸',
    street: 'í…Œí—¤ë€ë¡œ'
  }
};

// ì˜µì…”ë„ ì²´ì´ë‹ (?.)
const street = user.address?.street;
const zipCode = user.address?.zipCode; // undefined (ì—ëŸ¬ ì—†ìŒ)
const countryCode = user.address?.country?.code;

// ë„ ë³‘í•© ì—°ì‚°ì (??)
const safeAge = user.age ?? 'ë‚˜ì´ ë¯¸ìƒ'; // null/undefinedë§Œ ëŒ€ì²´
const safeEmail = user.email ?? 'no-email@example.com';

// ì˜µì…”ë„ ì²´ì´ë‹ê³¼ í•¨ê»˜ ì‚¬ìš©
const city = user.address?.city ?? 'ë„ì‹œ ë¯¸ìƒ';
```

### ë°°ì—´/ê°ì²´ ì²˜ë¦¬ ë©”ì„œë“œ

#### ğŸ” ë°°ì—´ ê²€ìƒ‰: find()

â€» ë”± í•œê°€ì§€ ìš”ì†Œë§Œ ì°¾ì„ë•Œ! 

```javascript
const users = [
  { id: 1, name: 'ê¹€ì² ìˆ˜', age: 25, active: true },
  { id: 2, name: 'ë°•ì˜í¬', age: 32, active: false },
  { id: 3, name: 'ì´ë¯¼ìˆ˜', age: 28, active: true }
];

// íŠ¹ì • ID ì‚¬ìš©ì ì°¾ê¸°
const user = users.find(u => u.id === 2);
// ê²°ê³¼: { id: 2, name: 'ë°•ì˜í¬', age: 32, active: false }

// ì¡°ê±´ì— ë§ëŠ” ì²« ë²ˆì§¸ ì‚¬ìš©ì ì°¾ê¸°
const firstActiveUser = users.find(u => u.active);

// ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ê¸°
const targetUser = users.find(u => u.id === 2);
const userName = targetUser?.name ?? 'ì‚¬ìš©ì ì—†ìŒ';
```

#### ğŸ”„ ë°°ì—´ ë³€í™˜: filter()ì™€ map()

```javascript
// filter: ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë§Œ ê±¸ëŸ¬ë‚´ê¸°
const activeUsers = users.filter(user => user.active);
const youngUsers = users.filter(user => user.age < 30);

// map: ë°ì´í„° ë³€í™˜í•˜ê¸°
const userNames = users.map(user => user.name);
// ê²°ê³¼: ['ê¹€ì² ìˆ˜', 'ë°•ì˜í¬', 'ì´ë¯¼ìˆ˜']

const userCards = users.map(user => ({
  title: user.name,
  subtitle: `${user.age}ì„¸`,
  isActive: user.active
}));

// ë©”ì„œë“œ ì²´ì´ë‹: ì—¬ëŸ¬ ì‘ì—…ì„ ì—°ê²°
const activeUserNames = users
  .filter(user => user.active)           // 1. í™œì„± ì‚¬ìš©ìë§Œ
  .sort((a, b) => a.age - b.age)         // 2. ë‚˜ì´ìˆœ ì •ë ¬
  .map(user => user.name);               // 3. ì´ë¦„ë§Œ ì¶”ì¶œ
```

#### ğŸ“‹ ê°ì²´ ë‹¤ë£¨ê¸°: Object.keys(), Object.values, Object.entries()

```javascript
const user = {
  id: 1,
  name: 'ê¹€ì² ìˆ˜',
  email: 'kim@example.com',
  age: 25
};

// ê°ì²´ì˜ í‚¤ë“¤ ê°€ì ¸ì˜¤ê¸°
const keys = Object.keys(user);
// ê²°ê³¼: ['id', 'name', 'email', 'age']

// ê°ì²´ì˜ ê°’ë“¤ ê°€ì ¸ì˜¤ê¸°
const values = Object.values(user);
// ê²°ê³¼: ['ê¹€ì² ìˆ˜', 'kim@example.com', 25]

// ê°ì²´ë¥¼ [í‚¤, ê°’] ë°°ì—´ë¡œ ë³€í™˜
const entries = Object.entries(user);
// ê²°ê³¼: [['id', 1], ['name', 'ê¹€ì² ìˆ˜'], ['email', 'kim@example.com'], ['age', 25]]

// entriesë¥¼ í™œìš©í•œ ê°ì²´ ë³€í™˜
const doubled = Object.fromEntries(
  Object.entries({ a: 1, b: 2, c: 3 }).map(([key, value]) => [key, value * 2])
);
// ê²°ê³¼: { a: 2, b: 4, c: 6 }
```

### â³ ë¹„ë™ê¸° ì²˜ë¦¬ - async/await

#### ğŸ¤ Promiseë€?

**Promise**ëŠ” ë¹„ë™ê¸° ì‘ì—…ì˜ **ìµœì¢… ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´**ì…ë‹ˆë‹¤. "ê²°ê³¼ë¥¼ ë‚˜ì¤‘ì— ì•Œë ¤ì¤„ê²Œ\!"ë¼ëŠ” 'ì•½ì†'ê³¼ ê°™ì•„ìš”. PromiseëŠ” ì„¸ ê°€ì§€ ìƒíƒœë¥¼ ê°€ì§‘ë‹ˆë‹¤.

  * **Pending (ëŒ€ê¸°) ğŸ’¬:** ì•½ì†ì˜ ê²°ê³¼ê°€ ì•„ì§ ë‚˜ì˜¤ì§€ ì•Šì€ ì´ˆê¸° ìƒíƒœ
  * **Fulfilled (ì´í–‰) âœ…:** ì•½ì†ì´ ì„±ê³µì ìœ¼ë¡œ ì§€ì¼œì§„ ìƒíƒœ (ê²°ê³¼ê°’ê³¼ í•¨ê»˜)
  * **Rejected (ê±°ë¶€) âŒ:** ì•½ì†ì´ ì§€ì¼œì§€ì§€ ëª»í•œ ìƒíƒœ (ì—ëŸ¬ì™€ í•¨ê»˜)

`async/await`ëŠ” ì´ëŸ° Promiseë¥¼ ë” ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ìµœì‹  ë¬¸ë²•ì…ë‹ˆë‹¤. Promiseì˜ `.then()`, `.catch()` ì²´ì´ë‹ì„ ë™ê¸°(ìˆœì°¨ì ) ì½”ë“œì²˜ëŸ¼ ë³´ì´ê²Œ ë§Œë“¤ì–´ ê°€ë…ì„±ì„ ë†’ì—¬ì¤ë‹ˆë‹¤.

#### ğŸ“ Promise ê¸°ë³¸ ì‚¬ìš©ë²• (.then/.catch)

PromiseëŠ” ì£¼ë¡œ `.then()`ìœ¼ë¡œ ì„±ê³µ ê²°ê³¼ë¥¼, `.catch()`ë¡œ ì‹¤íŒ¨(ì—ëŸ¬)ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```javascript
// 1. Promise ê°ì²´ ìƒì„±
const myPromise = new Promise((resolve, reject) => {
  // ë¹„ë™ê¸° ì‘ì—… ì‹œë®¬ë ˆì´ì…˜ (ì˜ˆ: 1ì´ˆ í›„ ì‹¤í–‰)
  setTimeout(() => {
    const success = true; // ì‘ì—… ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€

    if (success) {
      // ì„±ê³µ ì‹œ resolve í˜¸ì¶œ
      resolve({ id: 1, name: 'ê¹€ì² ìˆ˜' }); 
    } else {
      // ì‹¤íŒ¨ ì‹œ reject í˜¸ì¶œ
      reject(new Error('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'));
    }
  }, 1000);
});

// 2. Promise ì‚¬ìš©
myPromise
  .then(user => {
    // Promiseê°€ resolveë˜ë©´ (ì„±ê³µí•˜ë©´) ì‹¤í–‰ë  ì½”ë“œ
    console.log('ì„±ê³µ:', user.name); // ê²°ê³¼: ì„±ê³µ: ê¹€ì² ìˆ˜
    return user.name; // ë‹¤ìŒ thenìœ¼ë¡œ ê°’ì„ ë„˜ê¸¸ ìˆ˜ ìˆìŒ
  })
  .then(name => {
    console.log(`${name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!`); // ê²°ê³¼: ê¹€ì² ìˆ˜ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!
  })
  .catch(error => {
    // Promiseê°€ rejectë˜ë©´ (ì‹¤íŒ¨í•˜ë©´) ì‹¤í–‰ë  ì½”ë“œ
    console.error('ì‹¤íŒ¨:', error.message);
  });
```

#### ğŸ”„ Promiseì™€ async/await ê¸°ì´ˆ

```javascript
// async í•¨ìˆ˜ëŠ” í•­ìƒ Promiseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
async function getUserInfo(userId) {
  try {
    // await: Promiseê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ê²°ê³¼ê°’ì„ ë°˜í™˜
    const response = await fetch(`https://api.example.com/users/${userId}`);
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    const user = await response.json();
    return user;
  } catch (error) {
    console.error('ì˜¤ë¥˜ ë°œìƒ:', error.message);
    return null; // ì˜¤ë¥˜ ë°œìƒ ì‹œ null ë°˜í™˜
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
async function main() {
    const userData = await getUserInfo(1);
    const userName = userData?.name ?? 'ì‚¬ìš©ì ì—†ìŒ';
    console.log(userName);
}

main();
```

---
### ğŸ¤– N8N Code Nodeì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´

```javascript
// ì…ë ¥ ë°ì´í„° ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜¤ê¸°
const items = $input.all();
const firstItem = items[0]?.json;

// ë°ì´í„° êµ¬ì¡°ë¶„í•´ë¡œ í•„ìš”í•œ ê°’ ì¶”ì¶œ
const { userId, email, status } = firstItem ?? {};

// ì•ˆì „í•œ ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
const result = items
  .filter(item => item.json?.status === 'active')
  .map(item => {
    const { id, name, email } = item.json ?? {};
    return {
      json: {
        userId: id,
        displayName: name?.toUpperCase() ?? 'Unknown',
        emailDomain: email?.split('@')[1] ?? 'unknown.com'
      }
    };
  });

return result;
```

---

## ğŸŒ 4-3. API ì†Œê°œ

### APIë€ ë¬´ì—‡ì¼ê¹Œìš”? ğŸ¤”

**API**ëŠ” **Application Programming Interface**ì˜ ì•½ì 
ê°„ë‹¨íˆ ë§í•´ **'ì»´í“¨í„° í”„ë¡œê·¸ë¨ë“¤ì´ ì„œë¡œ ì†Œí†µí•˜ëŠ” ê·œì¹™'**

  - **Application (ì• í”Œë¦¬ì¼€ì´ì…˜):** ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ì•±ì´ë‚˜ ì›¹ì‚¬ì´íŠ¸ (e.g., ì¸ìŠ¤íƒ€ê·¸ë¨, êµ¬ê¸€ ì§€ë„)
  - **Programming (í”„ë¡œê·¸ë˜ë°):** ì»´í“¨í„°ê°€ ì•Œì•„ë“£ëŠ” ì–¸ì–´ë¡œ ëª…ë ¹ì„ ë‚´ë¦¬ëŠ” ê²ƒ
  - **Interface (ì¸í„°í˜ì´ìŠ¤):** ë‘ ì‹œìŠ¤í…œì„ ì—°ê²°í•´ ì£¼ëŠ” 'ì ‘ì '


### APIë¥¼ ì™œ ë°°ì›Œì•¼ í• ê¹Œ?


#### ì‹ë‹¹ ë¹„ìœ ë¡œ ì´í•´í•˜ëŠ” API

```
ê³ ê° (í´ë¼ì´ì–¸íŠ¸)  â†’  ì›¨ì´í„° (API)  â†’  ì£¼ë°© (ì„œë²„)
     ìš”ì²­           â†™     â†˜           ì‘ë‹µ
                   ì£¼ë¬¸ì„œ ì „ë‹¬      ìš”ë¦¬ ì œê³µ
```

![hackers_4th_03](https://hackers-n8n-lecture.s3.ap-northeast-2.amazonaws.com/images/hackers_4th_03.png)

- ë§Œì•½ ì›¨ì´í„°(API)ê°€ ì—†ë‹¤ë©´, ì†ë‹˜ì´ ì§ì ‘ ì£¼ë°©ì— ë“¤ì–´ê°€ì„œ ìš”ë¦¬ë²•ì„ ë°°ìš°ê³  ì¬ë£Œë¥¼ ì°¾ì•„ ìš”ë¦¬í•´ì•¼ í•´ì•¼í•¨
- **ì£¼ë°©ì˜ ë³µì¡í•œ ë‚´ë¶€ ì‚¬ì •ì€ ëª°ë¼ë„**, ì •í•´ì§„ ë©”ë‰´íŒ(ê·œì¹™)ì„ ë³´ê³  ì›¨ì´í„°ì—ê²Œ ì£¼ë¬¸ë§Œ í•˜ë©´ ì›í•˜ëŠ” ê²°ê³¼(ìš”ë¦¬)ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒ 

#### APIê°€ í•„ìˆ˜ì¸ ì´ìœ 

**1. í˜„ëŒ€ ì„œë¹„ìŠ¤ì˜ ê¸°ë°˜**
- ChatGPT, Google Maps, ì¹´ì¹´ì˜¤í†¡ ë“± ëª¨ë“  ì„œë¹„ìŠ¤ê°€ API ê¸°ë°˜
- ì†Œì…œ ë¡œê·¸ì¸, ê²°ì œ ì‹œìŠ¤í…œ, ì§€ë„ ì„œë¹„ìŠ¤ ëª¨ë‘ API ì—°ë™

**2. n8n ìë™í™”ì˜ í•µì‹¬**
- ê±°ì˜ ëª¨ë“  n8n ë…¸ë“œê°€ API ê¸°ë°˜ìœ¼ë¡œ ë™ì‘
- ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ì„ ìœ„í•œ í•„ìˆ˜ ìš”ì†Œ

### REST API ê¸°ë³¸ ê°œë…

#### REST APIë€?

- **RE**presentational **S**tate **T**ransfer
- HTTP í”„ë¡œí† ì½œ í™œìš©
- ì§ê´€ì ì´ê³  ì´í•´í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°

#### HTTP URL êµ¬ì¡° ë¶„ì„

```
https://api.example.com/v1/todos/123
â”‚       â”‚              â”‚   â”‚     â”‚
â”‚       â”‚              â”‚   â”‚     â””â”€ ë¦¬ì†ŒìŠ¤ ID
â”‚       â”‚              â”‚   â””â”€ ë¦¬ì†ŒìŠ¤ ì´ë¦„ (ë³µìˆ˜í˜•)
â”‚       â”‚              â””â”€ ë²„ì „ ì •ë³´  
â”‚       â””â”€ API ë„ë©”ì¸
â””â”€ í”„ë¡œí† ì½œ (HTTPS)
```

#### HTTP ë©”ì„œë“œì™€ URL íŒ¨í„´

|ë©”ì„œë“œ|URL|ì„¤ëª…|
|---|---|---|
|GET|`/api/todos`|ëª¨ë“  í•  ì¼ ì¡°íšŒ|
|GET|`/api/todos/123`|íŠ¹ì • í•  ì¼ ì¡°íšŒ|
|POST|`/api/todos`|ìƒˆë¡œìš´ í•  ì¼ ìƒì„±|
|PUT|`/api/todos/123`|íŠ¹ì • í•  ì¼ ìˆ˜ì •|
|DELETE|`/api/todos/123`|íŠ¹ì • í•  ì¼ ì‚­ì œ|

### HTTP ìƒíƒœ ì½”ë“œ

#### ì„±ê³µ ì½”ë“œ (2xx)

- `200 OK` - ìš”ì²­ ì„±ê³µ
- `201 Created` - ìƒì„± ì„±ê³µ
- `204 No Content` - ì„±ê³µ, ë°˜í™˜ ë°ì´í„° ì—†ìŒ

#### í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ (4xx)

- `400 Bad Request` - ì˜ëª»ëœ ìš”ì²­
- `401 Unauthorized` - ì¸ì¦ í•„ìš”
- `404 Not Found` - ë¦¬ì†ŒìŠ¤ ì—†ìŒ

#### ì„œë²„ ì˜¤ë¥˜ (5xx)

- `500 Internal Server Error` - ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
- `503 Service Unavailable` - ì„œë¹„ìŠ¤ ì´ìš© ë¶ˆê°€

### API ë¥¼ ìœ„í•œ VS Code ì¶”ì²œ í”ŒëŸ¬ê·¸ì¸

####  REST Client
- **ê¸°ëŠ¥**: VS Code ì—ë””í„°ì—ì„œ ì§ì ‘ HTTP ìš”ì²­ì„ ì‘ì„±í•˜ê³  ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `.http` ë˜ëŠ” `.rest` íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
- **ì¥ì **: ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ API ìš”ì²­ì„ ëª…í™•í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, Postmanê³¼ ê°™ì€ ë³„ë„ì˜ GUI ë„êµ¬ ì—†ì´ APIë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆì–´ í¸ë¦¬í•©ë‹ˆë‹¤.

####  Thunder Client
- **ê¸°ëŠ¥**: Postmanê³¼ ìœ ì‚¬í•œ GUI ê¸°ë°˜ì˜ ê²½ëŸ‰ REST API í´ë¼ì´ì–¸íŠ¸ì…ë‹ˆë‹¤.
- **ì¥ì **: ì§ê´€ì ì¸ UIë¥¼ í†µí•´ ìš”ì²­ì„ ìƒì„±, ê´€ë¦¬í•˜ê³  ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³„ë„ì˜ í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•  í•„ìš” ì—†ì´ VS Code ë‚´ì—ì„œ ëª¨ë“  API í…ŒìŠ¤íŠ¸ ì‘ì—…ì„ ì™„ë£Œí•  ìˆ˜ ìˆì–´ ê°œë°œ ì›Œí¬í”Œë¡œìš°ê°€ ë‹¨ìˆœí•´ì§‘ë‹ˆë‹¤.

### JSON Serverë¡œ ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘

#### ë¹ ë¥¸ API ê°œë°œì„ ìœ„í•œ ë„êµ¬:

```bash
# JSON Server ì„¤ì¹˜
npm install -g json-server

# API ì„œë²„ ì‹¤í–‰
json-server --watch todos_db.json --port 3001
```

#### todos_db.json
- json_serverìš© êµ¬ì¡° 
```json
{
  "todos": [
    {
      "id": 1,
      "title": "json-server í•™ìŠµí•˜ê¸°",
      "completed": false
    },
    {
      "id": 2,
      "title": "REST API ê°œë… ë³µìŠµ",
      "completed": true
    },
    {
      "id": 3,
      "title": "í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´ êµ¬ìƒ",
      "completed": false
    }
  ]
}
```

**ìë™ ìƒì„±ë˜ëŠ” ì—”ë“œí¬ì¸íŠ¸:**

- `GET /todos` - ëª¨ë“  ë°ì´í„° ì¡°íšŒ
- `POST /todos` - ìƒˆ ë°ì´í„° ìƒì„±
- `PUT /todos/:id` - ë°ì´í„° ìˆ˜ì •
- `DELETE /todos/:id` - ë°ì´í„° ì‚­ì œ
- `GET /todos/:id` - íŠ¹ì • ë°ì´í„° ì¡°íšŒ



### API í…ŒìŠ¤íŠ¸ ë°©ë²•

#### 1. REST Client í™•ì¥ ì‚¬ìš©

**test.http íŒŒì¼ ìƒì„±:**

```http
### ëª¨ë“  í•  ì¼ ì¡°íšŒ
GET http://localhost:3001/todos

### ìƒˆë¡œìš´ í•  ì¼ ìƒì„±
POST http://localhost:3001/todos
Content-Type: application/json

{
    "title": "REST Clientë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸°",
	"completed": false
}

### íŠ¹ì • í•  ì¼ ì¡°íšŒ  
GET http://localhost:3001/todos/1

### í•  ì¼ ìˆ˜ì •
PUT http://localhost:3001/todos/1
Content-Type: application/json

{
    "title": "ìˆ˜ì •ëœ ì œëª©",
    "completed": true
}

### í•  ì¼ ì‚­ì œ
DELETE http://localhost:3001/todos/1
```

#### 2. curl ëª…ë ¹ì–´ ì‚¬ìš©

```bash
# ëª¨ë“  í•  ì¼ ì¡°íšŒ
curl http://localhost:3001/todos

# ìƒˆë¡œìš´ í•  ì¼ ìƒì„±
curl -X POST http://localhost:3001/todos \
-H "Content-Type: application/json" \
-d '{"title": "ìƒˆë¡œìš´ í•  ì¼"}, "completed": false}'

# íŠ¹ì • í•  ì¼ ì¡°íšŒ (ì¶”ê°€ë¨)
curl http://localhost:3001/todos/1

# í•  ì¼ ìˆ˜ì • (ìˆ˜ì •ë¨)
curl -X PUT http://localhost:3001/todos/1 \
-H "Content-Type: application/json" \
-d '{"title": "ìˆ˜ì •ëœ í•  ì¼", "completed": true}'

# í•  ì¼ ì‚­ì œ (ìˆ˜ì •ë¨)
curl -X DELETE http://localhost:3001/todos/1
```


> [!NOTE] jq utility
> terminal ì—ì„œ jq ìœ í‹¸ë¦¬í‹° ì“°ë©´ pretty í•˜ê²Œ ì¶œë ¥ ê°€ëŠ¥

#### 3. thunder client ë°©ë²• ì‹œì—°
- GUI ë°©ì‹ì´ ì‚¬ëŒì´ ì§ê´€ì ìœ¼ë¡œ ì•Œê¸° ì‰¬ì›€ 
- í•˜ì§€ë§Œ í…ìŠ¤íŠ¸ ê¸°ë°˜ REST Client í™•ì¥ì´ AIì™€ ì½œë¼ë³´ í•˜ê¸° ì¢‹ìŒ


---

## ğŸ’» 4-4. CRUD êµ¬í˜„

### CRUDë€?

ë°ì´í„° ì¡°ì‘ì˜ 4ê°€ì§€ ê¸°ë³¸ ì‘ì—…:

|ì‘ì—…|ì„¤ëª…|HTTP ë©”ì„œë“œ|
|---|---|---|
|**C**reate|ìƒì„±|POST|
|**R**ead|ì½ê¸°|GET|
|**U**pdate|ìˆ˜ì •|PUT/PATCH|
|**D**elete|ì‚­ì œ|DELETE|

### Node.js Express TODO API êµ¬í˜„

#### 1. í”„ë¡œì íŠ¸ ì„¤ì •

```bash
mkdir todo-api
cd todo-api
npm init -y
npm install express
```

#### 2. ê¸°ë³¸ ì„œë²„ êµ¬ì¡° (app.js)

```javascript
const express = require('express');
const fs = require('fs');
const path = require('path');

const app = express();
const PORT = 3000;

// ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
app.use(express.json());
// CORS í—ˆìš© (ì›¹ì„œë²„ì—ì„œ í˜¸ì¶œ ì‹¤íŒ¨ ë°©ì§€)
app.use((req, res, next) => {
    res.header('Access-Control-Allow-Origin', '*');
    res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE');
    res.header('Access-Control-Allow-Headers', 'Content-Type');
    next();
});

// ë°ì´í„° íŒŒì¼ ê´€ë¦¬
const DATA_FILE = path.join(__dirname, 'todos.json');

function readTodos() {
    try {
        const data = fs.readFileSync(DATA_FILE, 'utf8');
        return JSON.parse(data);
    } catch (error) {
        return [];
    }
}

function writeTodos(todos) {
    fs.writeFileSync(DATA_FILE, JSON.stringify(todos, null, 2));
}

app.listen(PORT, () => {
    console.log(`Server running on http://localhost:${PORT}`);
});
```

#### 3. CRUD ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„

##### ì´ˆê¸° ë°ì´í„° (todos.json)

```json
[
    {
        "id": 1,
        "title": "API í•™ìŠµí•˜ê¸°",
        "completed": false,
        "createdAt": "2024-01-01T00:00:00.000Z"
    },
    {
        "id": 2,
        "title": "CRUD êµ¬í˜„í•´ë³´ê¸°", 
        "completed": false,
        "createdAt": "2024-01-01T00:00:00.000Z"
    }
]
```

##### CREATE - ìƒˆë¡œìš´ í•  ì¼ ì¶”ê°€

```javascript
app.post('/api/todos', (req, res) => {
    try {
        const todos = readTodos();
        const newTodo = {
            id: Date.now(),
            title: req.body.title,
            completed: false,
            createdAt: new Date().toISOString()
        };
        
        todos.push(newTodo);
        writeTodos(todos);
        
        res.status(201).json(newTodo);
    } catch (error) {
        res.status(500).json({ error: 'Failed to create todo' });
    }
});
```

##### READ - í•  ì¼ ì¡°íšŒ

```javascript
// ëª¨ë“  í•  ì¼ ì¡°íšŒ
app.get('/api/todos', (req, res) => {
    try {
        const todos = readTodos();
        res.json(todos);
    } catch (error) {
        res.status(500).json({ error: 'Failed to fetch todos' });
    }
});

// íŠ¹ì • í•  ì¼ ì¡°íšŒ
app.get('/api/todos/:id', (req, res) => {
    try {
        const todos = readTodos();
        const todo = todos.find(t => t.id === parseInt(req.params.id));
        
        if (!todo) {
            return res.status(404).json({ error: 'Todo not found' });
        }
        
        res.json(todo);
    } catch (error) {
        res.status(500).json({ error: 'Failed to fetch todo' });
    }
});
```

##### UPDATE - í•  ì¼ ìˆ˜ì •

```javascript
app.put('/api/todos/:id', (req, res) => {
    try {
        const todos = readTodos();
        const todoIndex = todos.findIndex(t => t.id === parseInt(req.params.id));
        
        if (todoIndex === -1) {
            return res.status(404).json({ error: 'Todo not found' });
        }
        
        // ê¸°ì¡´ todo ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const existingTodo = todos[todoIndex];
        
        // ì—…ë°ì´íŠ¸í•  todo ê°ì²´ ìƒì„±
        const updatedTodo = {
            ...existingTodo,
            title: req.body.title || existingTodo.title,
            completed: req.body.completed !== undefined ? req.body.completed : existingTodo.completed,
            updatedAt: new Date().toISOString()
        };
        
        // ë°°ì—´ì— ì—…ë°ì´íŠ¸ëœ todo ì €ì¥
        todos[todoIndex] = updatedTodo;
        
        writeTodos(todos);
        res.json(todos[todoIndex]);
    } catch (error) {
        res.status(500).json({ error: 'Failed to update todo' });
    }
});
```

##### DELETE - í•  ì¼ ì‚­ì œ

```javascript
app.delete('/api/todos/:id', (req, res) => {
    try {
        const todos = readTodos();
        const todoIndex = todos.findIndex(t => t.id === parseInt(req.params.id));
        
        if (todoIndex === -1) {
            return res.status(404).json({ error: 'Todo not found' });
        }
        
        const deletedTodo = todos.splice(todoIndex, 1)[0];
        writeTodos(todos);
        
        res.json({ message: 'Todo deleted successfully', todo: deletedTodo });
    } catch (error) {
        res.status(500).json({ error: 'Failed to delete todo' });
    }
});
```

#### 5. Rest client í…ŒìŠ¤íŠ¸ 
**test.http íŒŒì¼ ìƒì„±:**

```http
### ëª¨ë“  í•  ì¼ ì¡°íšŒ
GET http://localhost:3000/api/todos

### ìƒˆë¡œìš´ í•  ì¼ ìƒì„±
POST http://localhost:3000/api/todos
Content-Type: application/json

{
    "title": "REST Clientë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸°"
}

### íŠ¹ì • í•  ì¼ ì¡°íšŒ  
GET http://localhost:3000/api/todos/1

### í•  ì¼ ìˆ˜ì •
PUT http://localhost:3000/api/todos/1
Content-Type: application/json

{
    "title": "ìˆ˜ì •ëœ ì œëª©",
    "completed": true
}

### í•  ì¼ ì‚­ì œ
DELETE http://localhost:3000/api/todos/1
```

