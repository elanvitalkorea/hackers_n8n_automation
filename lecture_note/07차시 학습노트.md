## 7-1 n8n 소개 
1. n8n은 무엇일까요
2. n8n의 4가지 핵심 특징 ① - 노드 기반의 시각적 워크플로우
3. n8n의 4가지 핵심 특징 ② - 압도적인 자유도와 확장성
4. n8n의 4가지 핵심 특징 ③ - 합리적인 가격 정책
5. n8n의 4가지 핵심 특징 ④ - 강력한 최신 AI 기능 탑재
6. 자동화 툴 강자들 비교
7. 할 수 있는 워크플로우 (AI 응용 예시)
8. N8N cloud 로 쉬운 시작


## 7-2 hostinger 설치
- mini pc나 서버 없이 cloud 버전 보다 싸게 이용 가능
- 매우 쉬운 셋업 
- hostinger site 접속
	- with ref code : https://hostinger.com?REFERRALCODE=ELANVITAL 20% 할인
- Services -> VPS -> Self-hosted n8n 
- plan 선택 KVM1 
	- 1CPU 4GB 충분
- 기간
	- 12개월 24개월 등 선택 
	- 기간이 길어질수록 할인율 좋아짐
	- 2년에 100달러 정도 
- Server : 말레이시아
- Select operating System : n8n ( + 100 workflows )
- 주소, 결제 정보 기입
- 5분 이내 배포 완료
- web terminal 접속 가능
- 업그레이드 방법
	- `docker compose pull`
	- `docker compose down`
	- `docker compose up -d`
- ai starter self host 일부 채용 방법 github에 설명 예정
	- postgresql, qdrant 추가 설치 방법 
	- 백업방법 

## 7-3 n8n 설치, mac

#### 기본 n8n 설치
- homebrew, npm, node, git 등 기본 설치 완성 상태
	-  2차시 환경 설정 참조 
- docker desktop 설치
	- https://www.docker.com/products/docker-desktop/ 
- git clone ai starter kit self hosted
	- `git clone https://github.com/n8n-io/self-hosted-ai-starter-kit`
- 비번 시리즈 바꿔줄 것 
	- `.env` 파일 기본 비번 값 바꿔주기
```bash
POSTGRES_USER=root
POSTGRES_PASSWORD=password
POSTGRES_DB=n8n

N8N_ENCRYPTION_KEY=super-secret-key
N8N_USER_MANAGEMENT_JWT_SECRET=even-more-secret
N8N_DEFAULT_BINARY_DATA_MODE=filesystem
```
- secure boot off
	- `docker-compose.yml` 수정  
```yaml
  n8n:
    <<: *service-n8n
    hostname: n8n
# ... 중략
    environment:
      - N8N_SECURE_COOKIE=false
```
- 최종 설치 및 실행
	- `docker compose up`
	- 자동으로 이미지 다운로드 하면서 실행함 

#### claudeflare 
- ngrok 통한 방법 있으나 최근 무료 버전 기능 다운그레이드
- 동작 매커니즘
	- 외부와 단절된 네트워크를 터널 통해서 데이터 주고 받을 수 있음 
![hackers_7th_01](https://hackers-n8n-lecture.s3.ap-northeast-2.amazonaws.com/images/hackers_7th_01.png)
- 도메인 구입을 통해 편하게 커버
	- 1년 10달러 정도
	- n8n localhost 전용 도메인으로 일단 만드는 것 추천
	- 예시 : `elanvitalhome.com`
	- n8n 서브 도메인을 하기 터널에서 설정
- zero trust zone  free plan 가입
- zero trust home -> networks -> tunnels -> Create a tunnel 
	- 1단계 Select tunnel type
		- cloudflare 선택
	- 2단계 Name your tunnel 
		- enter name `elanvital_m4air` 
		- 컴퓨터 단위로 보통 설정 
	- 3단계  Install and run connectors
		- OS나 Docker 방식 선택 
	- 4단계 Route tunnel 
		- 도메인과 localservice 연결 단계 
		- subdomain : `n8n` 
		- Domain : `elanvitalhome.com` 
		- Service 
			- Type : https
			- URL : `localhost:5678`

![hackers_7th_02](https://hackers-n8n-lecture.s3.ap-northeast-2.amazonaws.com/images/hackers_7th_02.png)


#### n8n 추가 설정
- webhook 설정
- google callback 위한 설정 

```bash
  n8n:
    <<: *service-n8n
    hostname: n8n
# ... 중략
    environment:
      - N8N_SECURE_COOKIE=false
      - N8N_PROTOCOL=https
      - WEBHOOK_URL=https://n8n.elanvitaloffice.com/
      - N8N_HOST=n8n.elanvitaloffice.com
      - N8N_PORT=5678
      - N8N_PROXY_HOPS=1
      - N8N_EDITOR_BASE_URL=https://n8n.elanvitaloffice.com/
```


#### 문제 상황시 
- `docker compose restart n8n`

## 7-4  n8n 설치, window

#### wsl2 설치
- 지원 버전 확인
	- Windows 10 1903 이상 
	- Windwos 11 전체 지원
- Powershell 이용 설치
	- **관리자 권한**으로 Powershell 실행
	- 1단계: Linux용 Windows 하위 시스템 기능 활성화
		- `dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart`
	- 2단계: 가상 머신 플랫폼 기능 활성화
		- `dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart`
	- 3단계: 재부팅
	- 4단계: Linux 커널 업데이트 패키지 설치
		- [x64 머신용 최신 WSL2 Linux 커널 업데이트 패키지](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi)를 다운로드하여 설치
		- 다운로드한 `wsl_update_x64.msi` 파일을 실행
	- 5단계 : WSL2를 기본 버전으로 설정
		- `wsl --set-default-version 2`
	- 6단계 : Linux 배포판 설치
		- `wsl --install -d Ubuntu-24.04`
		- `wsl --list --online` 으로 설치가능한 배포판 목록 확인 가능
		- 설치 완료 후 초기 사용자 설정 이 후 사용 
		  
#### 기초 팩키지 설치 
- node.js, (npm) 설치
	- nvm 설치 스크립트 실행
		- `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash`
		- `https://github.com/nvm-sh/nvm`  github 통해 최신 버전 확인 할 것 
	- 터미널 프로파일 적용
		- `source ~/.bashrc`
	- node.js 최신 lts 버전 설치
		- `nvm install --lts`
	- 설치 확인
		- `node -v`
		- `npm -v`
- claude code 설치(optional)
	- `npm install -g @anthropic-ai/claude-code`
	- `claude` 으로 셋업 시작
	- AI 통해 환경 셋업이 너무 편해지므로 강력 추천

#### docker 환경 설치
- Docker Desktop for Windows 설치
	- [Docker Desktop 공식 다운로드 페이지](https://www.docker.com/products/docker-desktop/)에서 파일을 받아 설치
- Docker Desktop에서 WSL2 연동 설정
	- Docker Desktop을 실행하고, 우측 상단의 **설정(⚙️) 아이콘**을 클릭
	- **Resources \> WSL Integration** 메뉴로 이동
	- **"Enable integration with my default WSL distro"** 옵션을 켜고, 아래 목록에서 사용 중인 **Linux 배포판 (예: Ubuntu-24.04)의 스위치를 활성화(On)
	- `Apply & Restart` 버튼을 눌러 설정을 저장
- WSL2 터미널에서 Docker 작동 확인
	- `docker --version`
	- `docker-compose --version`

#### n8n self hosting 설치
- 나머지는 mac 에서 진행한 과정과 동일함
	- git clone 과정부터 진행하면 됨
- cloudflare 터널까지 설정함  

