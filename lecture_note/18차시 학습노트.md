 

## 🧩 오늘 다루는 네 가지 플랫폼 한눈에 보기

* **n8n + MCP**
  우리가 만든 기존 워크플로우(예: 뉴스 큐레이션)를 **MCP Trigger**로 감싸서, Cursor / OpenAI Agent / Dify 같은 곳에서 “뉴스 조회 도구”로 재사용.

* **Dify**
  노코드 기반 AI 앱 빌더. 워크플로우 기능은 n8n보다 단순하지만, **프롬프트·툴·지식·UI**를 한 번에 구성해서 챗봇·에이전트를 빠르게 만들 수 있음.

* **OpenAI Agent Builder**
  시각적인 노드(Editor) 위에서 Agent를 설계하고, MCP Tool과 File Search를 붙이고, 완성된 설정을 **웹 배포/코드 Export**까지 이어갈 수 있는 플랫폼.

* **Google OPAL & ADK**
  구글 생태계의 **AI 미니 앱 빌더(OPAL)**, 그리고 Python 기반 시각적 에이전트 빌더(ADK)로, 자연어와 블록 조합만으로 빠르게 AI 앱을 찍어낼 수 있음.

---

## 18‑1. n8n 뉴스 조회 Agent MCP 서버 등록

### 1) 컨셉 이해하기

* 기존에 만들어 둔 **“AI 뉴스 큐레이션” n8n 워크플로우**를 그대로 사용하되, 앞단에 **MCP Trigger**를 붙여서 **“뉴스 조회 도구”**로 노출합니다.
* 이렇게 만들어진 MCP 서버를 **Cursor**의 Custom MCP 서버로 등록하면, Cursor 채팅창에서

  > “오늘 AI 관련 주요 뉴스 알려줘”
  > 처럼 요청했을 때, 내부적으로 n8n 워크플로우가 실행되고 그 결과를 반환하게 됩니다.

### 2) n8n MCP Trigger 설정 흐름

1. **기존 워크플로우 준비**

   * 이미 만들어둔 **뉴스 큐레이션 워크플로우**를 그대로 활용합니다. (새로 만들 필요 없음) 

2. **MCP Trigger 노드 추가**

   * 새 워크플로우에서 **MCP Trigger** 노드를 추가하고, **“call workflow”** 형태로 구성합니다.
   * `Call Workflow` 노드에서 **두 개의 입력 변수를 받도록 설계**합니다.

     * `query`: 사용자가 원하는 뉴스 검색어/요청 문장
     * `sessionId`: 호출 세션 식별용(로그 추적, 캐싱 등에 활용 가능) 

3. **내부 호출 구조 정리**

   * MCP Trigger → Call Workflow 노드 → 기존 뉴스 큐레이션 워크플로우 순서로 연결합니다.
   * 기존 워크플로우의 **입력 파라미터를 `query`에 맞게 매핑**해서, 외부에서 들어온 질의를 그대로 재사용합니다. 

4. **대안: Webhook + 별도 MCP 서버**

   * n8n의 MCP Trigger를 쓰지 않고, **Webhook Trigger만 노출**한 뒤

     * 바깥에서 별도의 MCP 서버(예: node/python)에서 그 Webhook을 호출하는 구조도 가능합니다. 

### 3) Cursor MCP 연결 시 체크포인트

* **Cursor MCP 서버 등록** 시

  * n8n 인스턴스의 URL과 함께 **SSE(Server-Sent Events) 프로토콜 사용 여부를 명시**해야 합니다.
  * 설정 파일(mcp 관련 설정 JSON)에 `transport: "sse"` 같은 항목을 분명히 적지 않으면 스트리밍 응답이 제대로 동작하지 않을 수 있습니다.

> ✅ **핵심 요약**
>
> * n8n 워크플로우를 MCP Trigger로 감싸서 “도구화”
> * 외부 에디터(Cursor)에서 자연어로 부르면, n8n이 뒤에서 뉴스 워크플로우를 실행
> * SSE 설정까지 포함한 MCP 세팅이 중요

---

## 18‑2. Dify 실습 (AI 앱 빌더)

### 1) Dify의 포지션 정리

* **노코드 기반 AI 앱 빌더**

  * 코드 없이도 챗봇·에이전트·워크플로우 기반 앱을 빠르게 만들 수 있음.
  * **AI 중심 흐름**에는 강하지만, n8n처럼 **복잡한 시스템 자동화**에는 상대적으로 약한 편입니다.
* 그래도 **코드 노드와 커뮤니티 도구**가 많기 때문에, 웬만한 작업은 Dify 안에서도 해결 가능하다는 점을 보여줍니다. 

### 2) Cloud vs 셀프 호스팅

1. **Cloud 버전**

   * 가입 후 바로 빌더를 써볼 수 있어 개념 익히기에 좋습니다.

2. **셀프 호스팅(실습 포인트)**

   * n8n 셀프 호스팅과 비슷한 느낌으로, **Docker 기반 설치**를 진행합니다.
   * **Claude Code**(코드 에이전트)를 활용해 설치 스크립트와 docker-compose를 손쉽게 생성하는 흐름을 보여줍니다.
   * 퍼블릭 접속을 위해 **Cloudflare Tunnel**로 외부 URL을 만들고, 이 주소를 Dify .env에 반영합니다.
   * Claude Code에게 환경변수를 요청할 때 “Cloudflare Tunnel을 사용 중”이라는 컨텍스트를 전달해서, 적절한 URL 구성을 도와달라고 할 수 있습니다.
   * 셀프 호스팅을 하면

     * 워크플로우 개수 제한이 없어지고
     * 고급 LLM 모델 사용 제약도 훨씬 느슨해집니다.

### 3) 템플릿 & 툴 탐색

* **Template 타입 구경**

  * `Chatflow`, `Workflow`, `Agent`, `Chatbot` 등을 탐색하며 어떤 형태로 앱을 만들 수 있는지 감을 잡습니다.

* **Tool 마켓플레이스**

  * Dify 안에 이미 등록된 다양한 Tool(검색, DB, 외부 서비스)을 구경합니다.
  * **Custom Tool 등록 실습**

    * 예시 mock 서버: `https://mockserver-j3lr.onrender.com/`
    * 이 서버의 OpenAPI 스키마를 이용해 Dify에 Tool을 등록해 봅니다.
    * OpenAPI 스펙([https://swagger.io/specification/)을](https://swagger.io/specification/%29을) 기반으로 Tool을 정의하는 흐름을 체험합니다. 

### 4) Workflow & Agent 실습 포인트

1. **간단 워크플로우 만들기** 

   * Mock 데이터 API를 호출해 사용자 리스트를 가져오고
   * LLM에게 “이름만 요약해서 출력”하도록 시키는 플로우를 구성합니다.
   * Dify의 Workflow Builder에서 노드 연결만으로 API 호출 → LLM 요약 → 응답 반환 과정을 완성합니다.

2. **Agent 생성 실습**

   * **Instruction Generator** 스타일의 Agent를 하나 만들고
   * Tool로 **Wikipedia, Yahoo Finance** 등을 연결해, 실제 외부 정보를 조회하는 Agent를 구성합니다.
   * 응답 형태를 **JSON Schema**로 강제해, 다른 시스템이 파싱하기 쉬운 구조를 설계합니다.
   * 여기에 **MCP 서버(예: n8n 또는 다른 툴)** 를 붙이는 방법도 간단히 시연합니다.

### 5) Knowledge & Publish

* **Knowledge(지식) 추가**

  * Dify의 **hybrid 검색**(키워드 + 벡터)을 활용해 문서 기반 RAG 챗봇을 만들 수 있습니다.
  * API를 통해 지식을 자동으로 주입하는 방법이 있다는 정도를 언급합니다. (예: 내부에서 grok 등을 활용해 자동 동기화)

* **Publish 옵션**

  * 웹 챗 화면
  * iframe 등으로 **임베딩**
  * **API Access** (앱마다 별도 API Key 발급)
  * 오픈소스 UI인 **OpenWebUI**와의 연동 예시도 소개합니다.

* **n8n과 연결**

  * Dify에서 나온 결과를 **Webhook / HTTP Request**로 n8n에 전달하거나, 반대로 n8n에서 Dify API를 호출하는 식으로 양방향 연결이 가능하다는 점을 보여줍니다. 

> ✅ **핵심 요약**
>
> * Dify는 “AI 앱/UI를 빠르게 찍어내는 도구”
> * n8n이 복잡한 백엔드 자동화를 맡고, Dify가 프론트·대화 경험과 간단 워크플로우를 담당
> * Tool(외부 API) + Knowledge(RAG) + Agent를 조합해서 하나의 완성된 AI 앱으로 만든다

---

## 18‑3. OpenAI Agent Builder 실습

### 1) Agent Builder 구조 이해

* **OpenAI Agent Builder 소개**
  * https://platform.openai.com/agent-builder
  * OpenAI Agent Builder는 2025년 10월 OpenAI DevDay에서 발표된 **AgentKit**의 핵심 구성 요소로, AI 에이전트(Agent)를 **노코드/로우코드 방식으로 시각적으로 구축**할 수 있는 도구
  * 노드 종류는 크게 **Core, Tools, Logic, Data**로 나뉘어 역할이 분명합니다.
	  * **Core**: 사용자 입력, 응답 생성, Agent 블록 등
	  * **Tools**: 외부 API 호출, MCP Tool 연결
	  * **Logic**: 분기/조건/Classifier, 반복 등
	  * **Data**: File Search, 데이터 소스 관련 노드
* **Agent JSON Output**
  * Generate 메뉴가 있어 편하게 스키마 형식 지정 가능
### 2) 실습 플로우 개요

1. **Classifier 노드로 라우팅**
   * 사용자의 질의를 분류해서
     * “뉴스 관련 요청이면 → n8n MCP Tool 호출”
     * “문서 기반 질의면 → File Search 노드 사용”
     * “그 외 → 기본 답변”
   * 이런 식의 분기 로직을 **Classifier 노드**로 구현합니다.

2. **n8n MCP Tool 연결**

   * 18‑1에서 만든 **뉴스 조회 n8n MCP 서버**를 Agent Builder의 Tool로 등록합니다.
   * Agent 플로우에서 “뉴스 요약이 필요하다”는 판단이 나면 이 MCP Tool을 호출해 결과를 받아옵니다.

3. **FileSearch + Widget**

   * Agent Builder의 **File Search** 노드를 연결해, 업로드된 문서/지식에 대해 벡터 검색을 수행합니다.
   * 반환된 결과를 요약해서 UI에 표시하는 **Widget**도 생성할 수 있습니다.

### 3) 웹 배포 & 코드 Export

* **Web 배포**
  * `openai-chatkit-starter-app`을 활용하여, Agent Builder에서 구성한 Agent를 **웹 챗 UI**로 바로 띄울 수 있습니다.

* **MCP 연동 확장**
  * n8n 뿐 아니라, Dify에서 만든 MCP 서버도 쉽게 붙일 수 있고
  * Zapier 등도 Tool로 묶여 있어 다양한 SaaS와 연동 가능합니다.

* **코드 Export & 배포**

  * 완성된 Agent 설정은 **Agent Builder SDK**를 통해 코드 형태로 내보낼 수 있습니다.
    * JavaScript용 SDK: `openai-agents-js`
    * Python 기반 환경도 기본 제공됨.
  * 이렇게 Export된 코드는 **Render, Google Cloud Run** 등 서버리스 환경에 올려 실제 서비스로 운영할 수 있습니다. 

---

## 18‑4. Google OPAL & ADK 실습

### 1) Google OPAL 소개

* **Google OPAL**은 구글이 제공하는 **AI 미니 앱 빌더**로,
  * 자연어 생성 기능도 있어 “이런 앱 만들고 싶다”라고 설명하면 그에 맞는 워크플로우와 UI를 제안해주는 형태의 도구입니다.
  * 예시
>뉴스레터 생성 앱을 만들고 싶어요. 
토픽을 입력하면 리서치를 해서 뉴스레터 스타일로 만들어주고
어울리는 이미지도 만들어주는 앱이에요.
마지막에는 해당 내용으로 웹페이지를 만들어주세요 
* 예제 갤러리가 풍부함
  * 일정 정리, 문서 요약, 콘텐츠 생성 등 다양한 시나리오를 템플릿처럼 살펴볼 수 있습니다.
* MCP 연동 기능은 현재 테스트 중으로 곧 나올 예정

### 2) OPAL로 기업 분석 앱 생성 실습

* 간단 실습 아이디어:

  1. 기업 분석 전문가 앱으로 비지니스 모델 분석을 진행
  2. 결과물은 웹사이트가 나오도록 함.
  3. 중간에 이미지를 그리는 노드를 거쳐서 나옴
  
### 3) Google ADK Visual Agent Builder

* **ADK Visual Agent Builder**는
  * 웹 기반 UI 위에서
  * **Python**을 기반으로 하는 에이전트를 시각적으로 작성할 수 있는 도구입니다.
* 개발자 입장에서는
  * “코드로도 제어할 수 있는데, 노드 방식으로 구조를 한눈에 볼 수 있는 환경”이라 사용성이 좋습니다.
* 원하는 Agent(예: 문서 요약, 데이터 파이프라인 기반 분석, 사내 API 호출 Agent 등)를 모듈 단위로 설계하고, 필요 시 Python 코드로 디테일을 보완할 수 있습니다.
